{"version":3,"sources":["services/phoneService.js","components/Filter.js","components/PersonForm.js","components/Persons.js","components/Notification.js","components/Warning.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","personObj","post","id","delete","updateNum","put","Filter","searchName","handleSearchChange","value","onChange","PersonForm","addPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","className","Persons","persons","deleteHandler","searchResult","filter","person","name","toLowerCase","includes","map","number","onClick","Notification","message","Warning","App","useState","setPersons","setNewName","setNewNumber","setSearchName","successMessage","setSuccessMessage","warningMessage","setWarningMessage","useEffect","console","log","phoneService","returnedData","event","target","preventDefault","personeObj","date","Date","toISOString","window","confirm","find","changeNum","catch","error","setTimeout","concat","p","newPersonsObj","ReactDom","render","document","getElementById"],"mappings":"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","file":"static/js/main.66768017.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nconst baseUrl = '/api/persons'\r\n\r\n//Fetch all the phonebook data\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\n//Post new object to the server\r\nconst create = (personObj) => {\r\n    const request = axios.post(baseUrl, personObj)\r\n    return request.then(response => response.data)\r\n}\r\n\r\n//delete object from the server\r\nconst deleteObj = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n}\r\n\r\n//update phone number in the server\r\nconst update = (id, updateNum) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, updateNum)\r\n    return request.then(response => response.data)\r\n}\r\nexport default {getAll, create, deleteObj, update}","\r\nconst Filter = ({ searchName, handleSearchChange }) => {\r\n  return (\r\n    <div>\r\n      Search Phonebook: <input\r\n      value={searchName}\r\n      onChange={handleSearchChange}\r\n    />\r\n  </div>\r\n  )\r\n}\r\nexport default Filter","\r\nconst PersonForm = ({addPerson, newName, handleNameChange, newNumber, handleNumberChange}) => {\r\n  return (\r\n    <form onSubmit={addPerson}>\r\n        <div>\r\n          Name: <input\r\n            value={newName}\r\n            onChange={handleNameChange}\r\n          />\r\n          <br />\r\n          <br/>\r\n          Phone Number: <input\r\n            value={newNumber}\r\n            onChange={handleNumberChange}\r\n          />\r\n        </div>\r\n      <button\r\n        type=\"submit\" className=\"btn\">Add</button>\r\n      </form>\r\n  )\r\n}\r\nexport default PersonForm","\r\nconst Persons = ({persons, searchName, deleteHandler}) => {\r\n  const searchResult = persons.filter(person =>\r\n    person.name.toLowerCase().includes(searchName.toLowerCase())).map(person =>\r\n      <p>{person.name} {person.number}<span>\r\n        <button className=\"btn\" onClick={() => deleteHandler(person.id)}>Delete</button>\r\n      </span></p>\r\n      \r\n    )\r\n  return (\r\n    <div>\r\n       {searchResult}\r\n    </div>\r\n   \r\n  )\r\n}\r\nexport default Persons","\r\nconst Notification = ({ message }) => {\r\n    if (message === null) {\r\n        return null\r\n    }\r\n    return (\r\n        <div className=\"success\">\r\n            {message}\r\n        </div>\r\n    )\r\n}\r\nexport default Notification","\r\nconst Warning = ({ message }) => {\r\n    if (message === null) {\r\n        return null\r\n    }\r\n    return (\r\n        <div className=\"warning\">\r\n            {message}\r\n        </div>\r\n    )\r\n}\r\nexport default Warning","import React, { useEffect, useState } from \"react\";\nimport phoneService from './services/phoneService'\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport Notification from \"./components/Notification\"\nimport Warning from \"./components/Warning\";\nimport './index.css';\n\nconst App = () => {\n  //App state\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [searchName, setSearchName] = useState('')\n  const [successMessage, setSuccessMessage] = useState(null)\n  const [warningMessage, setWarningMessage] = useState(null)\n\n  //Fetch persons data from server \n  //using useEffect, axios and promise\n  useEffect(() => {\n    console.log('useEffect operation')\n    phoneService\n      .getAll()\n      .then(returnedData => {\n        setPersons(returnedData)\n      })\n  }, [])\n\n  //Handle number changes\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  //Handle name changes\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  //Handle search name changes\n  const handleSearchChange = (event) => {\n    setSearchName(event.target.value)\n  }\n\n  //Handle form submit\n  const addPerson = (event) => {\n    event.preventDefault()\n    const personeObj = {\n      name: newName,\n      number: newNumber,\n      date: new Date().toISOString,\n      // id: persons.length + 1,\n    }\n    \n    if (persons.map(person => person.name.toLowerCase()).includes(newName.toLowerCase())) {\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with the new one?`)) {\n        const person = persons.find(person => person.name === newName)\n        const id = person.id;\n        const changeNum = { ...person, number: newNumber }\n        phoneService\n          .update(id, changeNum)\n          .then(returnedData => {\n            setPersons(persons.map(person => person.id !== id ? person : returnedData))\n          })\n          .catch(error => {\n            setWarningMessage(`Information of ${person.name} has been removed from the server`)\n            setTimeout(() => {\n              setWarningMessage(null)\n            }, 5000)\n          })\n        \n        setNewName('')\n        setNewNumber('')\n        setSuccessMessage(`Updated ${person.name}.`)\n        setTimeout(() => {\n          setSuccessMessage(null)\n        }, 5000)\n      }\n    } else {\n      phoneService\n        .create(personeObj)\n        .then(returnedData => {\n          setPersons(persons.concat(returnedData))\n        })\n      setNewName('')\n      setNewNumber('')\n      setSuccessMessage(`Added ${newName}.`)\n      setTimeout(() => {\n        setSuccessMessage(null)\n      }, 5000)\n    }\n  }\n  \n  //Delete button handler\n  const deleteHandler = (id) => {\n    const person = persons.find(p => p.id === id)\n    if (window.confirm(`Do you want to Delete ${person.name}?`)) {\n      phoneService\n        .deleteObj(id)\n      const newPersonsObj = persons.filter(person => person.id !== id)\n      setPersons(newPersonsObj)\n    }\n  }\n\n  return (\n    <div className=\"container\">\n      <h1>Phonebook App</h1>\n\n      <Notification message={successMessage}/>\n     \n      <Warning message={warningMessage} />\n      \n      <Filter\n        searchName={searchName}\n        handleSearchChange={handleSearchChange}\n      />\n      \n      <h2>Add New Contact</h2>\n      <PersonForm\n        addPerson={addPerson}\n        newName={newName}\n        handleNameChange={handleNameChange}\n        newNumber={newNumber}\n        handleNumberChange={handleNumberChange}\n      />\n      <h2>Numbers</h2>\n      <Persons\n        persons={persons}\n        searchName={searchName}\n        deleteHandler={deleteHandler}\n      />\n    </div>\n  )\n}\nexport default App","import ReactDom from 'react-dom';\nimport App from './App'\n\nReactDom.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}